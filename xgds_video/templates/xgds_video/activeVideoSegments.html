{% extends "base.html" %}
{% load url from future %}
{% load nav %}
{% block siteSection %}Video{% endblock %}
    {% block nav %}
    {% nav "video.view" %}
    {{ block.super }}
    {% endblock %}
    
    {% block sitemenu-content-secondary %}
	{% include "xgds_video/video_subnav.html" %}
    {% endblock %}

{% block headExtras %}
    <script type="text/javascript" src="{{ STATIC_URL }}jquery/js/jquery.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}jquery/js/jquery-ui.js"></script>
    <link rel="stylesheet" href="{{ STATIC_URL }}jquery/css/jquery-ui.css"/>

    <script src="{{ STATIC_URL }}jquery/js/masonry.pkgd.min.js" type="text/javascript"></script>
    
    <script type="text/javascript" src="{{ STATIC_URL }}javascript/jwplayer/jwplayer.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}xgds_video/js/activeVideoSegments.js"></script>
    <script type="text/javascript">jwplayer.key="Wu88H+wZ8jZd7qICLr7IEKSmml1/EOMXWYcblA/CJVk=";</script>

{% endblock headExtras %}

<script type="text/javascript">
{% block jsSetVars %}
{% endblock %}

{% block jsInit %}
{% endblock %}
</script>

{% block contents %}
{% if not episode %}
    <div style="font-size: 1.5em; margin: 20px;">Couldn't find any {{ searchCriteria }}.</div>
{% else %}
    <p>
	<label for="sliderTimeLabel">Local Flight Time:</label>
	<input type="text" id="sliderTimeLabel" style="border:0; color:#f6931f; font-weight:bold;"/>
    </p>
    <div id="masterSlider" style="width:70%; float:left;"></div> 
    <div style="width:30% float:left;"><input type="button" id="addPlayPauseButton" onclick="playPauseButtonCallBack()"></input></div>
    <br>
    
    <fieldset style="width:25%; float:right"> 
    Play from time (HH:MM:SS) <input type="text" id="seekTime" size="30"><br> 
    <input type="button" value="seek" onclick=seekToTime(false)></input>
    </fieldset>
<br>

<table>
<tr>

{% for source in sources %}
    <td>  
	<div style="width:38%; float:left; text-align:left">Recorded Segment: {{ source.name }}</div> 
	<div style="width:60%; float:left; text-align:right">

<a class="mybutton" href="{% url 'xgds_video_recorded' %}?source={{ source.shortName }}&episode={{ episode.shortName }}" target="new">New Window</a>&nbsp;&nbsp;
  {% with feed=source.feed_set.all.0.shortName %}
    {% if feed %}
      <a class="mybutton" href="{% url 'xgds_video_live' feed %}">Live</a>
    {% endif %}
  {% endwith %}
</div>

	<br>	
	<br>

	<div id="myPlayer{{ source.shortName }}">
	</div>

	<br>
	<div id="myPlayer{{ source.shortName }}Label" style="text-align:left;font-family:arial,verdana,helvetica"> </div>
	
	<table width=100%>
	<tr>
	    <td width=50%>
		Test Site Time: <span id="testSiteTime{{ source.shortName }}">0</span>
	    </td>
	</tr>
	</table>
    </td>
    
    {% if forloop.counter|divisibleby:2 %}
	</tr>
	<tr>
    {% endif %}
{% endfor %}

</table>

<script language="javascript" type="text/javascript">
    var displaySegments = {{ segmentsJson|safe }};
    var baseUrl = "{{ baseUrl }}";

    var earliestSegTime = HMStoSeconds("{{ earliestTime }}");
    var latestSegTime = HMStoSeconds("{{ latestTime }}");

    var episode = {{ episodeJson|safe }};

    setupSlider(episode, "{{ latestTime }}");
    setupJWplayer(displaySegments, earliestSegTime, episode);

</script>
{% endif %}
{% endblock contents %}
